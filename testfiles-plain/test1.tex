% test file loadable in initex

\catcode123=1
\catcode125=2
\catcode64 = 11
\catcode35 =6

\def\@gobbletwo#1#2{}
\def\newif#1{%
  \count255 \escapechar \escapechar-1
    \let#1\iffalse
    \@if#1\iftrue
    \@if#1\iffalse
  \escapechar\count255 }
\def\@if#1#2{%
  \expandafter\def\csname\expandafter\@gobbletwo\string#1%
                    \expandafter\@gobbletwo\string#2\endcsname
                       {\let#1#2}}

\ifx\directlua\undefined\else
  \directlua{
    tex.enableprimitives("", {"detokenize"})
  }
\fi

\input ./iftex.sty

\def\test#1{\immediate\write20{\string#1 = \meaning#1}}

\test\ifetex
\test\ifpdftex
\test\ifxetex
\test\ifluatex
\test\ifluahbtex
\test\ifptex
\test\ifuptex
\test\ifptexng
\test\ifvtex
\test\ifalephtex

\bye